import { AbstractTransport, AbstractTransportMethodParams, AbstractTransportParams } from './abstract';
import { AbstractApi } from '../api/abstract';
import { SessionsClient } from '../sessions/client';
import { SessionsBackgroundInterface } from '../sessions/types';
import { Session } from '../types';
interface ConstructorParams extends AbstractTransportParams {
    api: AbstractApi;
}
export declare abstract class AbstractApiTransport extends AbstractTransport {
    protected sessionsClient: SessionsClient;
    protected sessionsBackground: SessionsBackgroundInterface;
    protected api: AbstractApi;
    constructor({ api, ...rest }: ConstructorParams);
    init({ signal }?: AbstractTransportMethodParams<'init'>): Promise<import("../sessions/types").HandshakeResponse | {
        success: false;
        error: NonNullable<"Aborted by signal" | "Aborted by timeout">;
        message: string | undefined;
    } | {
        success: false;
        error: "unexpected error";
        message: string;
    }>;
    listen(): import("../types").Success<undefined> | {
        success: false;
        error: "already listening";
        message: string | undefined;
    };
    enumerate({ signal }?: AbstractTransportMethodParams<'enumerate'>): Promise<{
        success: false;
        error: NonNullable<"Aborted by signal" | "Aborted by timeout">;
        message: string | undefined;
    } | {
        success: false;
        error: "unexpected error";
        message: string;
    } | {
        success: false;
        error: "unexpected error" | "Aborted by signal" | "Aborted by timeout";
        message?: string;
    } | import("../types").Success<import("../types").Descriptor[]>>;
    acquire({ input, signal }: AbstractTransportMethodParams<'acquire'>): Promise<{
        success: false;
        error: "wrong previous session" | "descriptor not found";
        message: string | undefined;
    } | {
        success: false;
        error: "Unable to open device" | "device not found" | "unexpected error" | "Aborted by signal" | "Aborted by timeout" | "LIBUSB_ERROR_ACCESS";
        message?: string;
    } | import("../types").Success<Session> | {
        success: false;
        error: NonNullable<"wrong previous session" | "device disconnected during action" | "Aborted by signal" | "Aborted by timeout">;
        message: string | undefined;
    } | {
        success: false;
        error: "unexpected error";
        message: string;
    }>;
    release({ path: _, session, onClose, signal, }: AbstractTransportMethodParams<'release'>): Promise<{
        success: false;
        error: NonNullable<"Aborted by signal" | "Aborted by timeout">;
        message: string | undefined;
    } | {
        success: false;
        error: "unexpected error";
        message: string;
    } | {
        success: false;
        error: "session not found";
        message: string | undefined;
    } | import("../types").Success<null>>;
    call({ session, name, data, protocol: customProtocol, signal, }: AbstractTransportMethodParams<'call'>): Promise<{
        success: false;
        error: "Unable to open device" | "A transfer error has occurred." | "device not found" | "device disconnected during action" | "unexpected error" | "Aborted by signal" | "Aborted by timeout";
        message?: string;
    } | {
        success: false;
        error: NonNullable<"Aborted by signal" | "Aborted by timeout">;
        message: string | undefined;
    } | {
        success: false;
        error: "unexpected error";
        message: string;
    } | import("../types").Success<{
        message: {
            [key: string]: any;
        };
        type: keyof import("@trezor/protobuf/lib/messages").MessageType;
    }>>;
    send({ data, session, name, protocol: customProtocol, signal, }: AbstractTransportMethodParams<'send'>): Promise<{
        success: false;
        error: NonNullable<"Aborted by signal" | "Aborted by timeout">;
        message: string | undefined;
    } | {
        success: false;
        error: "unexpected error";
        message: string;
    } | {
        success: false;
        error: "session not found";
        message: string | undefined;
    } | {
        success: false;
        error: "Unable to open device" | "A transfer error has occurred." | "device not found" | "device disconnected during action" | "unexpected error" | "Aborted by signal";
        message?: string;
    } | {
        success: true;
        payload: undefined;
    }>;
    receive({ session, protocol: customProtocol, signal, }: AbstractTransportMethodParams<'receive'>): Promise<{
        success: false;
        error: "Unable to open device" | "A transfer error has occurred." | "device not found" | "device disconnected during action" | "unexpected error" | "Aborted by signal" | "Aborted by timeout";
        message?: string;
    } | {
        success: false;
        error: NonNullable<"Aborted by signal" | "Aborted by timeout">;
        message: string | undefined;
    } | {
        success: false;
        error: "unexpected error";
        message: string;
    } | {
        success: false;
        error: "session not found";
        message: string | undefined;
    } | import("../types").Success<{
        message: {
            [key: string]: any;
        };
        type: keyof import("@trezor/protobuf/lib/messages").MessageType;
    }>>;
    releaseDevice(session: Session): Promise<import("../types").Success<undefined> | {
        success: false;
        error: "Unable to close device" | "device not found" | "unexpected error";
        message?: string;
    }>;
    stop(): void;
}
export {};
//# sourceMappingURL=abstractApi.d.ts.map