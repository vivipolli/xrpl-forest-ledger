!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BaseSolanaAdapter=t():e.BaseSolanaAdapter=t()}(self,(()=>(()=>{var e={649:(e,t,r)=>{const n=r(640);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},640:e=>{"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var o=e.charAt(n),i=o.charCodeAt(0);if(255!==t[i])throw new TypeError(o+" is ambiguous");t[i]=n}var a=e.length,s=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,o=0;e[r]===s;)n++,r++;for(var i=(e.length-r)*c+1>>>0,l=new Uint8Array(i);e[r];){var u=t[e.charCodeAt(r)];if(255===u)return;for(var p=0,h=i-1;(0!==u||p<o)&&-1!==h;h--,p++)u+=a*l[h]>>>0,l[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");o=p,r++}for(var d=i-o;d!==i&&0===l[d];)d++;for(var f=new Uint8Array(n+(i-d)),m=n;d!==i;)f[m++]=l[d++];return f}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,o=0,i=t.length;o!==i&&0===t[o];)o++,r++;for(var c=(i-o)*l+1>>>0,u=new Uint8Array(c);o!==i;){for(var p=t[o],h=0,d=c-1;(0!==p||h<n)&&-1!==d;d--,h++)p+=256*u[d]>>>0,u[d]=p%a>>>0,p=p/a>>>0;if(0!==p)throw new Error("Non-zero carry");n=h,o++}for(var f=c-n;f!==c&&0===u[f];)f++;for(var m=s.repeat(r);f<c;++f)m+=e.charAt(u[f]);return m},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},510:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e)},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function o(e,t,r){return e.concat(t).map((function(e){return n(e,r)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function a(e,t){try{return t in e}catch(e){return!1}}function s(e,r,c){(c=c||{}).arrayMerge=c.arrayMerge||o,c.isMergeableObject=c.isMergeableObject||t,c.cloneUnlessOtherwiseSpecified=n;var l=Array.isArray(r);return l===Array.isArray(e)?l?c.arrayMerge(e,r,c):function(e,t,r){var o={};return r.isMergeableObject(e)&&i(e).forEach((function(t){o[t]=n(e[t],r)})),i(t).forEach((function(i){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(a(e,i)&&r.isMergeableObject(t[i])?o[i]=function(e,t){if(!t.customMerge)return s;var r=t.customMerge(e);return"function"==typeof r?r:s}(i,r)(e[i],t[i],r):o[i]=n(t[i],r))})),o}(e,r,c):n(r,c)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return s(e,r,t)}),{})};var c=s;e.exports=c},621:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var o,i,a,l;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),void 0===a)a=i[t]=r,++e._eventsCount;else if("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=c(e))>0&&a.length>o&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=u.bind(n);return o.listener=r,n.wrapFn=o,o}function h(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):f(o,o.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){n.once&&e.removeEventListener(t,o),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=f(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},i.prototype.addListener=function(e,t){return l(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return l(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,p(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,p(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,o,i,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return h(this,e,!0)},i.prototype.rawListeners=function(e){return h(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},i.prototype.listenerCount=d,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},367:function(e,t,r){var n,o;!function(){"use strict";n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],o={},i=null;function a(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(){for(var r=this.getLevel(),o=0;o<n.length;o++){var i=n[o];this[i]=o<r?e:this.methodFactory(i,r,this.name)}if(this.log=this.debug,typeof console===t&&r<this.levels.SILENT)return"No console available for logging"}function l(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function u(n,o,i){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?s:void 0!==console[n]?a(console,n):void 0!==console.log?a(console,"log"):e)}(n)||l.apply(this,arguments)}function p(e,r){var a,s,l,p=this,h="loglevel";function d(){var e;if(typeof window!==t&&h){try{e=window.localStorage[h]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=encodeURIComponent(h),o=r.indexOf(n+"=");-1!==o&&(e=/^([^;]+)/.exec(r.slice(o+n.length+1))[1])}catch(e){}return void 0===p.levels[e]&&(e=void 0),e}}function f(e){var t=e;if("string"==typeof t&&void 0!==p.levels[t.toUpperCase()]&&(t=p.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=p.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?h+=":"+e:"symbol"==typeof e&&(h=void 0),p.name=e,p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},p.methodFactory=r||u,p.getLevel=function(){return null!=l?l:null!=s?s:a},p.setLevel=function(e,r){return l=f(e),!1!==r&&function(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&h){try{return void(window.localStorage[h]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"="+r+";"}catch(e){}}}(l),c.call(p)},p.setDefaultLevel=function(e){s=f(e),d()||p.setLevel(e,!1)},p.resetLevel=function(){l=null,function(){if(typeof window!==t&&h){try{window.localStorage.removeItem(h)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),c.call(p)},p.enableAll=function(e){p.setLevel(p.levels.TRACE,e)},p.disableAll=function(e){p.setLevel(p.levels.SILENT,e)},p.rebuild=function(){if(i!==p&&(a=f(i.getLevel())),c.call(p),i===p)for(var e in o)o[e].rebuild()},a=f(i?i.getLevel():"WARN");var m=d();null!=m&&(l=f(m)),c.call(p)}(i=new p).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=o[e];return t||(t=o[e]=new p(e,i.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=h),i},i.getLoggers=function(){return o},i.default=i,i},void 0===(o=n.call(t,r,t,e))||(e.exports=o)}()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r,n){return(r=function(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}r.r(n),r.d(n,{BaseSolanaAdapter:()=>H});var a=r(510),s=r.n(a),c=r(367),l=r.n(c);const u=l().getLogger("http-helpers");u.setLevel(c.levels.INFO);let p="torus-default";const h=(e,t={},r={},n={})=>{const o={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};n.useAPIKey&&(o.headers=i(i({},o.headers),function(){const e={};return p&&(e["x-api-key"]=p),e}())),r.method="POST";const a=s()(o,r);return n.isUrlEncodedData?(a.body=t,"application/json; charset=utf-8"===a.headers["Content-Type"]&&delete a.headers["Content-Type"]):a.body=JSON.stringify(t),(async(e,t)=>{let r=null;try{const n=new Promise(((t,n)=>{r=setTimeout((()=>{n(new Error(`Timed out in ${e}ms`))}),e)})),o=await Promise.race([t,n]);return null!=r&&clearTimeout(r),o}catch(e){throw null!=r&&clearTimeout(r),e}})(n.timeout||6e4,async function(e,t){let r=null;try{r=new URL(e)}catch(e){}return fetch(e,t)}(e,a).then((e=>{if(n.logTracingHeader&&function(e){const t=e.headers.get("x-web3-correlation-id");t&&u.info(`Request tracing with traceID = ${t}`)}(e),e.ok){const t=e.headers.get("content-type");return null!=t&&t.includes("application/json")?e.json():e.text()}throw function(e){u.info(`Response: ${e.status} ${e.statusText}`),u.info(`Url: ${e.url}`)}(e),e})))},d="https://authjs.web3auth.io";var f=r(621);function m(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout((()=>{throw e}))}}class g extends f.EventEmitter{emit(e,...t){let r="error"===e;const n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const o=n[e];if(void 0===o)return!1;if("function"==typeof o)m(o,this,t);else{const e=o.length,r=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(o);for(let n=0;n<e;n+=1)m(r[n],this,t)}return!0}}const y={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},v=i(i({},{SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"}),y);var w,b=(w=function(e,t){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},w(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),E=function(e){function t(t,r){var n,o,i,a=this.constructor,s=e.call(this,t,r)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),n=s,o=a.prototype,(i=Object.setPrototypeOf)?i(n,o):n.__proto__=o,function(e,t){void 0===t&&(t=e.constructor);var r=Error.captureStackTrace;r&&r(e,t)}(s),s}return b(t,e),t}(Error);function C(e){const t=e.findIndex((e=>e instanceof Error)),r=e.findIndex((e=>"string"==typeof e)),n=e.findIndex((e=>e&&"object"==typeof e&&"status"in e&&"type"in e));let o;if(-1!==n){const t=e[n];o=new Error(`${t.status} ${t.type.toString()} ${t.statusText}`)}else o=-1!==t?e.splice(t,1)[0]:-1!==r?new Error(e.splice(r,1)[0]):new Error("Unknown error");return[o,e]}class N extends E{constructor(e,r,n){super(r),t(this,"code",void 0),t(this,"message",void 0),t(this,"cause",void 0),this.code=e,this.message=r||"",this.cause=n,Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:C([this.cause])}}toString(){return JSON.stringify(this.toJSON())}}class T extends N{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e,t="",r){return new T(e,`${T.messages[e]}, ${t}`,r)}static notFound(e="",t){return T.fromCode(5001,e,t)}static notInstalled(e="",t){return T.fromCode(5002,e,t)}static notReady(e="",t){return T.fromCode(5003,e,t)}static windowBlocked(e="",t){return T.fromCode(5004,e,t)}static windowClosed(e="",t){return T.fromCode(5005,e,t)}static incompatibleChainNameSpace(e="",t){return T.fromCode(5006,e,t)}static duplicateAdapterError(e="",t){return T.fromCode(5007,e,t)}static invalidProviderConfigError(e="",t){return T.fromCode(5008,e,t)}static providerNotReadyError(e="",t){return T.fromCode(5009,e,t)}static rpcConnectionError(e="",t){return T.fromCode(5010,e,t)}static invalidParams(e="",t){return T.fromCode(5011,e,t)}static invalidNetwork(e="",t){return T.fromCode(5013,e,t)}}t(T,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class O extends N{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e,t="",r){return new O(e,`${O.messages[e]}. ${t}`,r)}static connectionError(e="",t){return O.fromCode(5111,e,t)}static disconnectionError(e="",t){return O.fromCode(5112,e,t)}static notConnectedError(e="",t){return O.fromCode(5113,e,t)}static popupClosed(e="",t){return O.fromCode(5114,e,t)}static mfaEnabled(e="",t){return O.fromCode(5115,e,t)}static chainConfigNotAdded(e="",t){return O.fromCode(5116,e,t)}static unsupportedOperation(e="",t){return O.fromCode(5117,e,t)}static coreKitKeyNotFound(e="",t){return O.fromCode(5118,e,t)}static userNotLoggedIn(e="",t){return O.fromCode(5119,e,t)}}t(O,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa",5116:"Chain config has not been added. Please add the chain config before calling switchChain",5117:"Unsupported operation",5118:"useCoreKitKey flag is enabled but coreKitKey is not available",5119:"User not logged in."});class k extends N{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletOperationsError"})}static fromCode(e,t="",r){return new k(e,`${k.messages[e]}, ${t}`,r)}static chainIDNotAllowed(e="",t){return k.fromCode(5201,e,t)}static operationNotAllowed(e="",t){return k.fromCode(5202,e,t)}static chainNamespaceNotAllowed(e="",t){return k.fromCode(5203,e,t)}}t(k,"messages",{5e3:"Custom",5201:"Provided chainId is not allowed",5202:"This operation is not allowed"});class x extends N{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletProviderError"})}static fromCode(e,t="",r){return new k(e,`${x.messages[e]}, ${t}`,r)}static invalidRequestArgs(e="",t){return k.fromCode(5301,e,t)}static invalidRequestMethod(e="",t){return k.fromCode(5302,e,t)}static invalidRequestParams(e="",t){return k.fromCode(5303,e,t)}}t(x,"messages",{5e3:"Custom",5301:"Expected a single, non-array, object argument.",5302:"'args.method' must be a non-empty string.",5303:"'args.params' must be an object or array if provided."});const A="eip155",I="solana",S="xrpl",_="other",L=(e,t,r)=>{if(e===_)return null;const n=t?"number"==typeof t?t:parseInt(t,16):(e=>{if(e===A)return 1;if(e===I)return 1;if(e===S)return 1;throw T.invalidParams(`Chain namespace ${e} is not supported`)})(e);return e===A?((e,t="")=>{const r=`https://api.web3auth.io/infura-service/v1/${e}/${t}`;return 1===e?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:A,chainId:"0x1",rpcTarget:r,displayName:"Ethereum Mainnet",blockExplorerUrl:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:10===e?{chainNamespace:A,decimals:18,blockExplorerUrl:"https://optimistic.etherscan.io",chainId:"0xa",displayName:"Optimism",logo:"optimism.svg",rpcTarget:r,ticker:"ETH",tickerName:"Ethereum"}:8453===e?{chainNamespace:A,decimals:18,blockExplorerUrl:"https://basescan.org",chainId:"0x2105",displayName:"Base",logo:"base.svg",rpcTarget:r,ticker:"ETH",tickerName:"Ethereum"}:42161===e?{chainNamespace:A,decimals:18,blockExplorerUrl:"https://arbiscan.io",chainId:"0xa4b1",displayName:"Arbitrum One",logo:"arbitrum.svg",rpcTarget:r,ticker:"ETH",tickerName:"Ethereum"}:59144===e?{chainNamespace:A,decimals:18,blockExplorerUrl:"https://lineascan.build",chainId:"0xe708",logo:"https://images.toruswallet.io/eth.svg",rpcTarget:r,ticker:"ETH",tickerName:"Ethereum"}:11155111===e?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:A,chainId:"0xaa36a7",rpcTarget:r,displayName:"Sepolia Testnet",blockExplorerUrl:"https://sepolia.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:137===e?{logo:"https://images.toruswallet.io/polygon.svg",chainNamespace:A,chainId:"0x89",rpcTarget:r,displayName:"Polygon Mainnet",blockExplorerUrl:"https://polygonscan.com",ticker:"POL",tickerName:"Polygon Ecosystem Token"}:80002===e?{logo:"https://images.toruswallet.io/polygon.svg",chainNamespace:A,chainId:"0x13882",rpcTarget:r,displayName:"Polygon Amoy Testnet",blockExplorerUrl:"https://www.oklink.com/amoy",ticker:"POL",tickerName:"Polygon Ecosystem Token",decimals:18}:56===e?{logo:"https://images.toruswallet.io/bnb.png",chainNamespace:A,chainId:"0x38",rpcTarget:r,displayName:"Binance SmartChain Mainnet",blockExplorerUrl:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:97===e?{logo:"https://images.toruswallet.io/bnb.png",chainNamespace:A,chainId:"0x61",rpcTarget:r,displayName:"Binance SmartChain Testnet",blockExplorerUrl:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:25===e?{logo:"https://images.toruswallet.io/cro.svg",chainNamespace:A,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorerUrl:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{logo:"https://images.toruswallet.io/cro.svg",chainNamespace:A,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorerUrl:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos",decimals:18}:8217===e?{logo:"https://images.toruswallet.io/klay.svg",chainNamespace:A,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorerUrl:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn",decimals:18}:1946===e?{chainNamespace:A,chainId:"0x79a",rpcTarget:"https://rpc.minato.soneium.org",displayName:"Soneium Minato Testnet",blockExplorerUrl:"https://explorer-testnet.soneium.org",ticker:"ETH",tickerName:"ETH",logo:"https://iili.io/2i5xce2.png"}:1868===e?{chainNamespace:A,chainId:"0x74c",rpcTarget:"https://rpc.soneium.org",displayName:"Soneium Mainnet",blockExplorerUrl:"https://soneium.blockscout.com",ticker:"ETH",tickerName:"ETH",logo:"https://iili.io/2i5xce2.png"}:null})(n,r):e===I?(e=>101===e||1===e?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:I,chainId:"0x65",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorerUrl:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana",decimals:9}:102===e||2===e?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:I,chainId:"0x66",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorerUrl:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana",decimals:9}:103===e||3===e?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:I,chainId:"0x67",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorerUrl:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana",decimals:9}:null)(n):e===S?(e=>1===e?{chainNamespace:S,decimals:15,chainId:"0x1",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://ripple-node.tor.us",wsTarget:"wss://s2.ripple.com",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl mainnet",blockExplorerUrl:"https://livenet.xrpl.org"}:2===e?{chainNamespace:S,decimals:15,chainId:"0x2",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://testnet-ripple-node.tor.us",wsTarget:"wss://s.altnet.rippletest.net",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl testnet",blockExplorerUrl:"https://testnet.xrpl.org",isTestnet:!0}:3===e?{chainNamespace:S,decimals:15,chainId:"0x3",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://devnet-ripple-node.tor.us",wsTarget:"wss://s.devnet.rippletest.net/",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl devnet",blockExplorerUrl:"https://devnet.xrpl.org",isTestnet:!0}:null)(n):null},P={AUTH:"auth",WALLET_CONNECT_V2:"wallet-connect-v2",SFA:"sfa"},R=i({TORUS_SOLANA:"torus-solana"},P),j=i({TORUS_EVM:"torus-evm",COINBASE:"coinbase"},P),U=i(i({},j),R),D=(R.TORUS_SOLANA,j.TORUS_EVM,j.COINBASE,{NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"}),M=i(i({},D),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated",CACHE_CLEAR:"cache_clear"});class $ extends g{constructor(e={}){super(),t(this,"adapterData",{}),t(this,"sessionTime",86400),t(this,"clientId",void 0),t(this,"web3AuthNetwork",v.MAINNET),t(this,"useCoreKitKey",void 0),t(this,"rehydrated",!1),t(this,"chainConfig",null),t(this,"knownChainConfigs",{}),t(this,"adapterNamespace",void 0),t(this,"currentChainNamespace",void 0),t(this,"type",void 0),t(this,"name",void 0),t(this,"status",void 0),this.setAdapterSettings(e)}get chainConfigProxy(){return this.chainConfig?i({},this.chainConfig):null}get connnected(){return this.status===D.CONNECTED}setAdapterSettings(e){if(this.status===D.READY)return;null!=e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!=e&&e.clientId&&(this.clientId=e.clientId),null!=e&&e.web3AuthNetwork&&(this.web3AuthNetwork=e.web3AuthNetwork),void 0!==(null==e?void 0:e.useCoreKitKey)&&(this.useCoreKitKey=e.useCoreKitKey);const t=e.chainConfig;if(t){if(!t.chainNamespace)throw T.notReady("ChainNamespace is required while setting chainConfig");this.currentChainNamespace=t.chainNamespace;const e=i(i({},L(t.chainNamespace,t.chainId,this.clientId)||{}),t);this.chainConfig=e,this.addChainConfig(e)}}checkConnectionRequirements(){if(this.name!==U.WALLET_CONNECT_V2||this.status!==D.CONNECTING){if(this.status===D.CONNECTING)throw T.notReady("Already connecting");if(this.status===D.CONNECTED)throw O.connectionError("Already connected");if(this.status!==D.READY)throw O.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function")}}checkInitializationRequirements(){if(!this.clientId)throw T.invalidParams("Please initialize Web3Auth with a valid clientId in constructor");if(!this.chainConfig)throw T.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.rpcTarget&&this.chainConfig.chainNamespace!==_)throw T.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.chainId&&this.chainConfig.chainNamespace!==_)throw T.invalidParams("chainID is required in chainConfig");if(this.status!==D.NOT_READY){if(this.status===D.CONNECTED)throw T.notReady("Already connected");if(this.status===D.READY)throw T.notReady("Adapter is already initialized")}}checkDisconnectionRequirements(){if(this.status!==D.CONNECTED)throw O.disconnectionError("Not connected with wallet")}checkAddChainRequirements(e,t=!1){if(!t&&!this.provider)throw O.notConnectedError("Not connected with wallet.");if(this.currentChainNamespace!==e.chainNamespace)throw k.chainNamespaceNotAllowed("This adapter doesn't support this chainNamespace")}checkSwitchChainRequirements({chainId:e},t=!1){if(!t&&!this.provider)throw O.notConnectedError("Not connected with wallet.");if(!this.knownChainConfigs[e])throw O.chainConfigNotAdded("Invalid chainId")}updateAdapterData(e){this.adapterData=e,this.emit(M.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}addChainConfig(e){const t=this.knownChainConfigs[e.chainId];this.knownChainConfigs[e.chainId]=i(i({},t||{}),e)}getChainConfig(e){return this.knownChainConfigs[e]||null}}class F extends Error{}function K(e){let t,r=!1,n=0;try{t=window[e],r=!0,n=t.length;const o="__storage_test__";return t.setItem(o,o),t.removeItem(o),!0}catch(e){const t=e;return!(!t||22!==t.code&&1014!==t.code&&"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||!r||0===n)}}F.prototype.name="InvalidTokenError";const W=e=>{const t=function(e,t){if("string"!=typeof e)throw new F("Invalid token specified: must be a string");t||(t={});const r=!0===t.header?0:1,n=e.split(".")[r];if("string"!=typeof n)throw new F(`Invalid token specified: missing part #${r+1}`);let o;try{o=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return atob(t)}}(n)}catch(e){throw new F(`Invalid token specified: invalid base64 for part #${r+1} (${e.message})`)}try{return JSON.parse(o)}catch(e){throw new F(`Invalid token specified: invalid json for part #${r+1} (${e.message})`)}}(e);return!t.exp||t.exp<Math.floor(Date.now()/1e3)};var q=r(649),B=r.n(q);class H extends ${async init(e){this.chainConfig||(this.chainConfig=L(I,1,this.clientId))}async authenticateUser(){if(!this.provider||this.status!==D.CONNECTED)throw O.notConnectedError();const{chainNamespace:e,chainId:t}=this.chainConfig,r=await this.provider.request({method:"getAccounts"});if(r&&r.length>0){const a=(n=r[0],o=this.name,K("localStorage")?localStorage.getItem(`${n.toLowerCase()}_${o}`):null);if(a&&!W(a))return{idToken:a};const s={domain:window.location.origin,uri:window.location.href,address:r[0],chainId:parseInt(t,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},c=await(async(e,t)=>{const r={payload:e,header:{t:"solana"===t?"sip99":"eip191"},network:"solana"===t?"solana":"ethereum"},n=await h(`${d}/siww/get`,r);if(!n.success)throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return n.challenge})(s,e),u=(new TextEncoder).encode(c),p=await this.provider.request({method:"signMessage",params:{message:u,display:"utf8"}}),f=await(async(e,t,r,n,o,a,s)=>{var c;const u=i({signature:{s:t,t:"solana"===e?"sip99":"eip191"},message:r,issuer:n,audience:"undefined"!=typeof window&&(null===(c=window.location)||void 0===c?void 0:c.hostname)||"com://reactnative",timeout:o},{}),p=await h(`${d}/siww/verify`,u,{headers:{client_id:a,wallet_provider:n,web3auth_network:s}});if(!p.success)throw l().error("Failed to authenticate user, ,message verification failed",p.error),new Error("Failed to authenticate user, ,message verification failed");return p.token})(e,B().encode(p),c,this.name,this.sessionTime,this.clientId,this.web3AuthNetwork);return((e,t,r)=>{K("localStorage")&&localStorage.setItem(`${e.toLowerCase()}_${t}`,r)})(r[0],this.name,f),{idToken:f}}var n,o;throw O.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const e=await this.provider.request({method:"getAccounts"});var t,r;e&&e.length>0&&(t=e[0],r=this.name,K("localStorage")&&localStorage.removeItem(`${t.toLowerCase()}_${r}`))}async disconnect(){this.rehydrated=!1,this.emit(M.DISCONNECTED)}}})(),n})()));